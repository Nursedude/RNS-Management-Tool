# Reticulum Transport Node Configuration
# =========================================
# REFERENCE TEMPLATE - Do not edit this file directly.
# Use the RNS Management Tool to apply this template,
# which will back up your existing config first.
#
# Full transport node config that routes traffic for other
# peers, passes announces, and serves path requests. This
# system acts as infrastructure for the Reticulum network.
#
# REQUIREMENTS:
#   - System should be stationary and always-on
#   - Run rnsd as a daemon/service for persistent operation
#   - Open firewall ports for TCP server (default: 4242)
#   - For LoRa: ensure RNODE device is connected
#   - For dialout access: sudo usermod -aG dialout $USER
#
# This config demonstrates a full transport node with:
#   1. AutoInterface    - Local LAN peer discovery
#   2. BackboneInterface/TCPServerInterface - Accept remote connections
#   3. TCPClientInterface - Upstream connectivity to other nodes
#   4. RNodeInterface   - LoRa radio for off-grid wide-area mesh
#
# Official docs: https://reticulum.network/manual/interfaces.html
# Official docs: https://reticulum.network/manual/using.html

[reticulum]

  # ENABLE TRANSPORT: This system will route traffic for other
  # peers, pass announces, and serve path requests. Only enable
  # this on stationary, always-on systems.
  enable_transport = True

  # Allow other local programs (NomadNet, Sideband, MeshChat)
  # to use this Reticulum instance.
  share_instance = Yes

  # Allow the rnprobe utility to test connectivity to this
  # transport instance. The probe destination will be printed
  # to the log at startup.
  respond_to_probes = Yes

  # Optional: Enable remote management (disabled by default).
  # Only enable if you understand the security implications.
  # enable_remote_management = No
  # remote_management_allowed = <hash_of_allowed_identity>

  # Optional: Panic and close if an interface has an
  # unrecoverable error (e.g., USB device disconnected).
  # Useful with a process supervisor that auto-restarts rnsd.
  # panic_on_interface_error = No

[logging]

  # Transport nodes benefit from slightly more verbose logging.
  # 4=info (default), 5=verbose, 6=debug
  loglevel = 5

[interfaces]

  # ==============================================
  # 1. LOCAL NETWORK - Auto Discovery
  # ==============================================
  # Discovers peers on local Ethernet/WiFi automatically.
  # Acts as gateway so local devices can reach the wider
  # Reticulum network through this transport node.

  [[Default Interface]]
    type = AutoInterface
    enabled = Yes

  # ==============================================
  # 2. TCP/BACKBONE SERVER - Accept Inbound Connections
  # ==============================================
  # Allows remote Reticulum peers to connect to this node.
  # Other peers use TCPClientInterface to reach this server.
  #
  # BackboneInterface is recommended on Linux (faster, handles
  # thousands of connections efficiently). TCPServerInterface
  # is the cross-platform alternative.
  #
  # Open your firewall: sudo ufw allow 4242/tcp

  # Option A: BackboneInterface (Linux/Android only, recommended)
  [[Backbone Server]]
    type = BackboneInterface
    enabled = yes
    listen_ip = 0.0.0.0
    listen_port = 4242

  # Option B: TCPServerInterface (cross-platform alternative)
  # [[TCP Server]]
  #   type = TCPServerInterface
  #   enabled = True
  #   listen_ip = 0.0.0.0
  #   listen_port = 4242

  # ==============================================
  # 3. TCP CLIENT - Upstream Connectivity
  # ==============================================
  # Connect to other transport nodes for wider network reach.
  # Reticulum handles intermittent connections gracefully.

  [[RNS Dublin Hub]]
    type = TCPClientInterface
    enabled = True
    target_host = dublin.connect.reticulum.network
    target_port = 4965

  # Additional upstream nodes for redundancy:
  #
  # [[BetweenTheBorders Hub]]
  #   type = TCPClientInterface
  #   enabled = True
  #   target_host = reticulum.betweentheborders.com
  #   target_port = 4242

  # ==============================================
  # 4. RNODE LoRa RADIO - Off-Grid Wide-Area Mesh
  # ==============================================
  # Provides sovereign LoRa radio connectivity. Set mode
  # to 'access_point' so the radio stays mostly quiet and
  # only transmits when local LoRa users are active. This
  # prevents backbone traffic from flooding the radio link.
  #
  # Change 'port' to your actual device path.
  # Adjust frequency/power for your regulatory region.

  [[RNode LoRa Interface]]
    type = RNodeInterface
    enabled = False
    port = /dev/ttyUSB0
    frequency = 914875000
    bandwidth = 125000
    txpower = 7
    spreadingfactor = 8
    codingrate = 5
    mode = access_point

  # -----------------------------------------------
  # Mode Reference for Transport Nodes
  # -----------------------------------------------
  # full         : Default. All discovery, meshing, and transport
  #                functionality active. Good for most interfaces.
  #
  # gateway (gw) : Like 'full' but also discovers unknown paths
  #                on behalf of nodes on this interface. Best for
  #                server-style interfaces (Backbone, TCP Server).
  #                Auto-set when discoverable is enabled on servers.
  #
  # access_point (ap) : Announces are NOT auto-broadcasted on the
  #                interface. Paths expire faster. Best for radio
  #                interfaces to keep them quiet unless active
  #                users are present.
  #
  # -----------------------------------------------
  # Discoverable Interface (Optional)
  # -----------------------------------------------
  # Make your transport node discoverable so other Reticulum
  # instances can automatically find and connect to it.
  #
  # [[Discoverable Backbone]]
  #   type = BackboneInterface
  #   enabled = yes
  #   listen_ip = 0.0.0.0
  #   listen_port = 4242
  #   discoverable = yes
  #   discovery_name = My Transport Node
  #   announce_interval = 6
  #   mode = gateway

  # -----------------------------------------------
  # Announce Rate Limiting (Optional)
  # -----------------------------------------------
  # For high-traffic transport nodes, you can control
  # announce propagation rates per-interface:
  #
  #   announce_cap = 2
  #     Max % of bandwidth for announce traffic (default: 2)
  #
  #   announce_rate_target = 3600
  #     Target announce interval in seconds
  #
  #   announce_rate_grace = 5
  #     Number of announces before rate limiting kicks in
  #
  #   announce_rate_penalty = 7200
  #     Penalty interval added when rate is exceeded
